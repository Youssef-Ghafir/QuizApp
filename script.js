let index_balls=0,url_ex="Quiz.json";async function GetQuestion(){try{let a=await fetch(url_ex);return a.ok?await a.json():Error("It Was An Error !")}catch(a){console.log(a)}}function GetLentgh(){GetQuestion().then(a=>{document.getElementById("count_questions").textContent=`${text_lentg} : `+a.length,document.getElementById("count_questions").setAttribute("lentgh",a.length)})}let index="";async function ShowQuestions(a){let b=document.querySelector(".container_quiz"),c=await GetQuestion();if(a=GetRandomly(),currentIndex.length<=c.length){if(1==currentIndex.length)for(let a=0;a<c.length;a++)document.querySelector(".ball").innerHTML+=`<span></span>`;AddActiveClass(),b.classList.remove("opacity"),setTimeout(()=>{b.classList.add("opacity")},200);let d=document.querySelector(".question");d.children[0].textContent=c[a].Q1;let e=0;for(const b of Object.keys(c[a]))"Q1"!=b&&"rightAnswer"!=b&&(d.children[1].children[e].textContent=c[a][b],e++)}return c}function AddActiveClass(){let a=document.querySelectorAll(".ball > span");a.forEach(b=>{b.classList.remove("active"),a[index_balls].classList.add("active")}),index_balls++,index_balls===a.length&&(index_balls=0)}let condition=!0,currentIndex=[];function GetRandomly(){for(;condition;){if(length_result=parseInt(document.getElementById("count_questions").getAttribute("lentgh")),currentIndex.length==length_result)return condition=!1,index;if(index=Math.floor(Math.random()*length_result),-1<currentIndex.indexOf(index))continue;else return currentIndex.push(index),index}}function Start_Quiz(){ShowQuestions().then(a=>{function c(b){return!(b.textContent!=a[index].rightAnswer)}function d(){o.forEach(a=>a.classList.remove("active"))}function e(a){let b=document.querySelectorAll(".ball > span"),c="";b.forEach(a=>{a.classList.contains("active")&&(c=a)}),a?c.classList.add("valid"):c.classList.add("invalid")}function f(){d(),p&&(j?(e(!0),i+=1):e(!1),clearInterval(l),ShowQuestions(),k=20,l=setInterval(()=>{m.textContent=k,k--},1e3),j=!1),p=g()}function g(){return currentIndex.length!=a.length||(clearInterval(n),clearInterval(l),k=20,i=(100*i/a.length).toFixed(0),h(i),!1)}function h(a){let c=document.querySelector(".result"),d=document.querySelector(".container_quiz");d.classList.remove("opacity"),setTimeout(()=>{c.classList.add("show")},200);let e=document.querySelector(".circular"),f=0;color="#f44336";let g=setInterval(()=>{f++,20<f&&49>=f?color="#FF9800 ":50<=f&&(color="#8BC34A"),0==a&&(f=0),e.style.background=`conic-gradient(${color} ${f}%,rgb(0 188 212 / 10%) ${f}%)`,e.children[0].children[0].textContent=`${f}%`,(f==a||0==a)&&clearInterval(g)},50)}let i=0,j=!1,k=20,l=setInterval(()=>{m.textContent=k,k--},1e3),m=document.querySelector(".timer"),n=setInterval(f,1e3*k),o=document.querySelectorAll(".answers");o.forEach(a=>{a.addEventListener("click",()=>{d(),a.classList.add("active"),j=c(a)})});let p=!0;document.querySelector(".submit_answer").addEventListener("click",()=>{p&&(clearInterval(n),k=20,n=setInterval(f,1e3*k),d(),ShowQuestions(),j?(i+=1,e(!0)):e(!1)),window.scrollTo({top:0,behavior:"smooth"}),j=!1,p=g()})})}let Start_btn=document.querySelector(".start_game button");Start_btn.addEventListener("click",()=>{Start_btn.parentElement.classList.remove("show"),GetLentgh(),setTimeout(()=>{Start_Quiz()},100)});const Lang={arabe:{title_1:"\u0627\u062E\u062A\u0631 \u0644\u063A\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",Select:{a:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",b:"\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629"},title_2:"\u0627\u0628\u062F\u0627 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",title_3:"\u0627\u0644\u0641\u0626\u0629",title_4:"\u0639\u062F\u062F \u0627\u0644\u0623\u0633\u0626\u0644\u0629",title_5:"\u0627\u0631\u0633\u0644 \u0627\u0644\u062C\u0648\u0627\u0628",title_6:"\u0639\u062F\u062F \u0627\u0644\u0623\u0633\u0626\u0644\u0629",title_7:"\u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",title_8:"\u0646\u062A\u064A\u062C\u062A\u0643 \u0647\u064A ",title_9:"\u0625\u0639\u0627\u062F\u0629 \u0628\u062F\u0621 \u0627\u0644\u0627\u062E\u062A\u0628\u0627\u0631",json:"Quiz_arab.json"},english:{title_1:"Choose The Language Of Quiz",Select:{a:"Arabe",b:"English"},title_2:"Start Quiz",title_3:"Categories:",title_4:"Question Count : ",title_5:"Submit Answer",title_6:"Count questions",title_7:"Quiz End",title_8:"Your Score is : ",title_9:"Restart Quiz",json:"Quiz.json"}};let lang=document.getElementById("lang"),text_lentg=Lang.english.title_6,title_1=document.querySelector(".title_1"),result_title=document.getElementById("result_title"),result_title_2=document.getElementById("result_title_1"),restart=document.getElementById("restart");lang.addEventListener("click",()=>{"arabe"==lang.value?(ChangeLang(Lang.arabe.title_1,Lang.arabe.json,"right","Cairo",Lang.arabe.Select.a,Lang.arabe.Select.b,Lang.arabe.title_2,Lang.arabe.title_4,Lang.arabe.title_5,Lang.arabe.title_6,Lang.arabe.title_7,Lang.arabe.title_8,Lang.arabe.title_9),SetLang("arabe")):(ChangeLang(Lang.english.title_1,Lang.english.json,"left","Poppins",Lang.english.Select.a,Lang.english.Select.b,Lang.english.title_2,Lang.english.title_4,Lang.english.title_5,Lang.english.title_6,Lang.english.title_7,Lang.english.title_8,Lang.english.title_9),SetLang("english"))});function ChangeLang(a,b,c,d,e,f,g,h,i,j,k,l,m){title_1.textContent=a,url_ex=b,document.body.style.textAlign=c,document.querySelectorAll("*").forEach(a=>a.style.fontFamily=d),lang.children[0].textContent=e,lang.children[1].textContent=f,Start_btn.textContent=g;let n=document.getElementById("count_questions");n.textContent=h,document.querySelector(".submit_answer").textContent=i,text_lentg=j,result_title.textContent=k,result_title_2.textContent=l,restart.textContent=m}function SetLang(a){window.sessionStorage.setItem("lang",a)}window.onload=()=>{window.sessionStorage.getItem("lang")&&("arabe"==window.sessionStorage.getItem("lang")?ChangeLang(Lang.arabe.title_1,Lang.arabe.json,"right","Cairo",Lang.arabe.Select.a,Lang.arabe.Select.b,Lang.arabe.title_2,Lang.arabe.title_4,Lang.arabe.title_5,Lang.arabe.title_6,Lang.arabe.title_7,Lang.arabe.title_8,Lang.arabe.title_9):ChangeLang(Lang.english.title_1,Lang.english.json,"left","Poppins",Lang.english.Select.a,Lang.english.Select.b,Lang.english.title_2,Lang.english.title_4,Lang.english.title_5,Lang.english.title_6,Lang.english.title_7,Lang.english.title_8,Lang.english.title_9))};function Restart(){window.location.reload()}